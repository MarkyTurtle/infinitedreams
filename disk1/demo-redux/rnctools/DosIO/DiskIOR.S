*------------------------------------------------------------------------------
* Low Level Read Only Disk Code for Commodore Amiga Dos Disks
*
* Copyright (c) 1988-92 Rob Northen Computing, U.K. All Rights Reserved.
*
* File: DISKIOR.S
*
* Date: 07.09.92
*------------------------------------------------------------------------------

*------------------------------------------------------------------------------
* Low Level Read Only Disk Code for AmigaDos Disks
* on entry,
*	d0.w = drive number
*		0 = DF0
*		1 = DF1
*		2 = DF2
*		3 = DF3
*		4 = DF0, side 0 only
*		5 = DF1, side 0 only
*		6 = DF2, side 0 only
*		7 = DF3, side 0 only
*	d1.w = start sector no.
*		(0-879 for single sided disk, 0-1759 for double sided disk)
*	d2.w = number of sectors to read/write
*		0 = turn motor off (bit 15 of d3 must be set)
*	d3.w = function
*		0 = read sectors
*	bit 15 of d3.w controls whether the drive motor is turned off
*	after use. If bit 15 is clear the drive motor is left on. If
*	bit 15 is set the drive motor is turned off. Leave the drive
*	motor on if another disk operation is to be made soon after
*	the current one.
*
*	a0.l = disk buffer address for transfer (must be CHIPMEM)
*	a1.l = workspace buffer, ($3300 bytes of CHIPMEM required)
* on exit,
*	d0.l = error no., if d0.l <> 0 then d1.l = sector offset in error
*		00 = no error
*		21 = No Sector Header
*		22 = Bad Sector Preamble
*		23 = Bad Sector ID
*		24 = Bad Sector Header Checksum
*		25 = Bad Sector Sum
*		26 = Too Few Sectors
*		27 = Bad Sector Header
*		28 = Write Protected
*		29 = No Disk in Drive
*		30 = Seek Error
*		34 = Drive In Use
*		-1 = DMA timeout
*
* Note: The disk code uses Timer A of CIA B
*       Master DMA (bit 9, $dff096) must be enabled
*	The blitter is not used
*------------------------------------------------------------------------------
diskioR
		dc.l $48E77FFC,$4E56FFDC,$38000244,$00033D44,$FFDC3D41,$FFDE3D42,$FFE03D43,$FFE22D48
		dc.l $FFE42D49,$FFE8E458,$02400001,$52403D40,$FFEC7000,$36026770,$701ED641,$B67C06E0
		dc.l $6E000090,$02810000,$FFFF82FC,$000B0C6E,$0001FFEC,$6702D241,$3D41FFEE,$48413D41
		dc.l $FFF06100,$03CE302E,$FFF0720B,$9240B26E,$FFE06F04,$322EFFE0,$3D41FFF2,$615E6628
		dc.l $302EFFE0,$906EFFF2,$671E3D40,$FFE0302E,$FFF2E188,$D080D1AE,$FFE4426E,$FFF0302E
		dc.l $FFECD16E,$FFEE60BE,$2F006100,$0358201F,$67207200,$322EFFEE,$0C6E0001,$FFEC6702
		dc.l $E249C2FC,$000BD26E,$FFF0D26E,$FFFA2F41,$00284E5E,$4A804CDF,$3FFE4E75,$7802426E
		dc.l $FFFC426E,$FFFA426E,$FFF8342E,$FFEE6100,$035A6600,$00A4701D,$08390002,$00BFE001
		dc.l $67000096,$2A6EFFE8,$4BED0400,$2ABCAAAA,$AAAA3B7C,$44890004,$610001D6,$6100009A
		dc.l $6676302E,$FFF46746,$C0FC0440,$41ED0006,$6100025C,$49F900DF,$F01E6100,$00D46670
		dc.l $302EFFFA,$906EFFF2,$676A2A6E,$FFE84BED,$0400302E,$FFF4C0FC,$0440DBC0,$2ABCAAAA
		dc.l $AAAA3B7C,$44890004,$204D6100,$0222302E,$FFF66718,$C0FC0440,$41ED0006,$61000210
		dc.l $49EEFFFE,$42546100,$00886624,$302EFFFA,$906EFFF2,$671E701A,$2F007402,$610002AC
		dc.l $610002F6,$201F0839,$000200BF,$E0016704,$51CCFF2C,$6000023A,$740A41ED,$0006303C
		dc.l $00406100,$01CA6100,$02046636,$6100016A,$670651CA,$FFE6602C,$61000128,$662AB26E
		dc.l $FFEE6624,$B43C000B,$6C1EB63C,$000B6E18,$53033D43,$FFF43D7C,$000BFFF6,$976EFFF6
		dc.l $70004E75,$70184E75,$701B4E75,$70194E75,$2A6EFFE8,$4BED0400,$302EFFF8,$C0FC0440
		dc.l $DBC0203C,$00001770,$61000320,$082C0001,$00016600,$00946100,$03046700,$00904AAD
		dc.l $044067E8,$610000F2,$66BA6100,$00B666B8,$B26EFFEE,$66B23602,$B66EFFF0,$6D5C302E
		dc.l $FFF2D06E,$FFF0B640,$6C50082C,$00010001,$6656302E,$FFFC0700,$664041ED,$0040323C
		dc.l $04006100,$00C82F00,$41ED0038,$61000094,$B09F6600,$FF78082C,$00010001,$662A6130
		dc.l $41ED0040,$226EFFE4,$D3C16100,$00BA6130,$302EFFFA,$B06EFFF2,$670E526E,$FFF80C6E
		dc.l $000BFFF8,$6600FF4A,$70004E75,$70FF4E75,$2203926E,$FFF0203C,$00000200,$C2C04E75
		dc.l $302EFFFC,$07C03D40,$FFFC526E,$FFFA4E75,$204D720A,$700041E8,$04402080,$51C9FFF8
		dc.l $4E7541ED,$0008611A,$36000243,$00FF3400,$E04A4840,$32000241,$00FFE048,$B03C00FF
		dc.l $4E752018,$22180280,$55555555,$02815555,$5555D080,$80814E75,$610C2F00,$41ED0030
		dc.l $61E0B09F,$4E7541ED,$00087228,$2F02E449,$53417000,$2418B580,$51C9FFFA,$241F0280
		dc.l $55555555,$4E7548E7,$F0E0707F,$45E80200,$263C5555,$55552218,$241AC283,$C483D281
		dc.l $828222C1,$51C8FFF0,$4CDF070F,$4E7543F9,$00DFF000,$337C4000,$0024337C,$80100096
		dc.l $337C6600,$009E337C,$9500009E,$337C4489,$007E2348,$0020337C,$0002009C,$E2480040
		dc.l $80003340,$00243340,$00244E75,$43F900DF,$F000203C,$000009C4,$61000170,$08290001
		dc.l $001F660A,$61000156,$66F270FF,$60027000,$33FC0002,$00DFF09C,$33FC4000,$00DFF024
		dc.l $4A804E75,$33FC0400,$00DFF09E,$4A6EFFE2,$6A1E72FF,$13C100BF,$D100302E,$FFDC5680
		dc.l $018113C1,$00BFD100,$01C113C1,$00BFD100,$4E7572FF,$13C100BF,$D1000881,$000761D4
		dc.l $203C0000,$00C86000,$00E248E7,$30002602,$6100009E,$302EFFDC,$D04041FA,$01083030
		dc.l $00006A04,$6132662A,$E248E24A,$72019440,$670E6A04,$72FF4442,$70036150,$534266F8
		dc.l $302EFFDC,$D04041FA,$00DC3183,$00006160,$70004CDF,$000C4E75,$48E72000,$74550839
		dc.l $000400BF,$E001670E,$700372FF,$611E51CA,$FFEE701E,$6010302E,$FFDCD040,$41FA00A6
		dc.l $42700000,$70004CDF,$00044E75,$2F00612A,$4A016B04,$08800001,$08800000,$13C000BF
		dc.l $D10008C0,$000013C0,$00BFD100,$201F603A,$610813C0,$00BFD100,$4E7548A7,$6000302E
		dc.l $FFDC1439,$00BFD100,$0002007F,$56000182,$5700D040,$323B004E,$08010000,$67040882
		dc.l $00021002,$4C9F0006,$4E75611E,$08390000,$00BFDE00,$66F65380,$66F04E75,$08390000
		dc.l $00BFDE00,$661C5380,$671813FC,$000800BF,$DE0013FC,$008A00BF,$D40013FC,$000200BF
		dc.l $D5004E75,$FFFFFFFF,$FFFFFFFF

